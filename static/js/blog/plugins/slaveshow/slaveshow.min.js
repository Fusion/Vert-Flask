//--------------------------------------------------------------------
//File: slaveshow.min.js
//Author: Joseph McCullough. 
//		  http://vertstudios.com/
//		  @Joe_query
//Purpose: Executes a slideshow with optional slaves that follow suit.
//         Features include next, previous, and navigation.
//--------------------------------------------------------------------

function isset(a){if((typeof a=='undefined')||(a==null)||(a=="")){return false;}else{return true;}}

(function(l){l.fn.slaveshow=function(g){var h={container:l(this),slides:l(this).children(),duration:3000,transition:500,slaves:[],delay:0,cycles:10};defaultSettings=l.extend(h,l.fn.slaveshow.defaults,g);var j={animating:false,navSelected:false,numAnimating:0,relativeIndex:0,activeIndex:0,slidesTemplate:l(defaultSettings.slides),numSlideShows:0,numSlides:l(defaultSettings.slides).length};var k={main:new slideshow(defaultSettings)};function slideshow(a){for(var i in defaultSettings){this[i]=(isset(a[i]))?a[i]:defaultSettings[i];}this.container=l(a.container);this.slides=l(a.container).children();this.entrance={animation:"fadeIn",speed:500,easing:"jswing"};this.exit={animation:"fadeOut",speed:500,easing:"jswing"};for(var i in this.entrance){this.entrance[i]=(isset(a.entrance)&&isset(a.entrance[i]))?a.entrance[i]:this.entrance[i];this.exit[i]=(isset(a.exit)&&isset(a.exit[i]))?a.exit[i]:this.exit[i];}j.numSlideShows++;}slideshow.prototype.displaySlide=function(a,b){var c=this;j.activeIndex=b;if(a!=0&&(j.numAnimating<j.numSlideShows)){if(j.numAnimating==0)j.animating=true;setTimeout(function(){c.firstSlide=l(c.slides[0]);c.doTransition(c.firstSlide,c.exit);for(var i=0;i<a;i++){c.slides=l(c.slides).arrayShift("first","last");}if(isset(defaultSettings.nav)){l(defaultSettings.nav).removeClass('slideNavActive').addClass('slideNavUnclickable');l(defaultSettings.nav).eq(b).addClass('slideNavActive slideNavActiveUnclickable');}},c.delay);setTimeout(function(){c.firstSlide=l(c.slides[0]).hide();l(c.slides).fakeFloat();l(c.slides).slice(1).show(0);c.doTransition(c.firstSlide,c.entrance);setTimeout(function(){j.numAnimating++;if(j.numAnimating==j.numSlideShows){j.animating=false;j.numAnimating=0;l(defaultSettings.nav).removeClass('slideNavUnclickable slideNavActiveUnclickable');}},c.entrance.speed);},(c.delay+c.entrance.speed+((j.navSelected==false||(j.navSelected==true&&c.transition<0))?c.transition:0)));}};slideshow.prototype.animate=function(){var a=this;for(var i=1;i<(a.slides.length*a.cycles);i++){setTimeout(function(){if(j.navSelected==false){if(a==k.main){(j.activeIndex<j.numSlides-1)?j.activeIndex++:j.activeIndex=0;j.relativeIndex=l(j.slidesTemplate[j.activeIndex]).getIndexOf(k["main"].slides);}a.displaySlide(j.relativeIndex,j.activeIndex);}},((a.duration+a.entrance.speed+a.exit.speed+a.transition)*i));}};slideshow.prototype.doTransition=function(a,b){var c=b.animation.toLowerCase();var d=l(a).width();var e=b.speed;var f=b.easing;switch(c){case "fromright":l(a).animate({'left':'+='+d+'px','opacity':'show'},0).animate({'left':'-='+d+'px'},{duration:e,easing:f});break;case "fromleft":l(a).animate({'left':'-='+d+'px','opacity':'show'},0).animate({'left':'+='+d+'px'},{duration:e,easing:f});break;case "frombottom":l(a).animate({'top':'+='+d+'px','opacity':'show'},0).animate({'top':'-='+d+'px'},{duration:e,easing:f});break;case "fromtop":l(a).animate({'top':'-='+d+'px','opacity':'show'},0).animate({'top':'+='+d+'px'},{duration:e,easing:f});break;case "fadein":l(a).fadeIn(e);break;case "toleft":l(a).animate({'left':'-='+d+'px'},{duration:e,easing:f}).animate({'opacity':'hide','left':'+='+d+'px'},0);break;case "toright":l(a).animate({'left':'+='+d+'px'},{duration:e,easing:f}).animate({'opacity':'hide','left':'-='+d+'px'},0);break;case "totop":l(a).animate({'top':'-='+d+'px'},{duration:e,easing:f}).animate({'opacity':'hide','top':'+='+d+'px'},0);break;case "tobottom":l(a).animate({'top':'+='+d+'px'},{duration:e,easing:f}).animate({'opacity':'hide','top':'-='+d+'px'},0);break;default:l(a).fadeOut(e);}};if(defaultSettings.slaves.length){for(i=0;i<defaultSettings.slaves.length;i++){k["slave"+i]=new slideshow(defaultSettings.slaves[i]);}}if(isset(defaultSettings.nav)||isset(defaultSettings.left)){l(defaultSettings.nav).click(function(){if(j.animating==false&&j.numAnimating==0){j.navSelected=true;j.relativeIndex=l(j.slidesTemplate[l(this).index()]).getIndexOf(k["main"].slides);for(var i in k){k[i].displaySlide(j.relativeIndex,l(this).index());}}});}if(isset(defaultSettings.left)&&isset(defaultSettings.right)){defaultSettings.right.add(defaultSettings.left).click(function(){if(j.animating==false&&j.numAnimating==0){j.navSelected=true;if(l(this).equalTo(defaultSettings.left)){j.activeIndex>0?j.activeIndex--:j.activeIndex=j.numSlides-1;}else{j.activeIndex<j.numSlides-1?j.activeIndex++:j.activeIndex=0;}j.relativeIndex=l(j.slidesTemplate[j.activeIndex]).getIndexOf(k["main"].slides);for(var i in k){k[i].displaySlide(j.relativeIndex,j.activeIndex);}}});}for(var i in k){l(k[i].slides).fakeFloat();k[i].animate();}};l.fn.arrayShift=function(a,b,c){var d=l.makeArray(l(this));for(var i=0;i<arguments.length;i++){if(isNaN(arguments[i])){if(arguments[i]=="first"){arguments[i]=0;}else if(arguments[i]=="last"){arguments[i]=d.length-1;}}else{arguments[i]=parseInt(arguments[i],10);}}var e=d[a];if(a>b){for(i=a;i>b;i--){d[i]=d[i-1];}d[b]=e;}else if(a<b){for(i=a;i<b;i++){d[i]=d[i+1];}d[b]=e;}if(typeof c=='function'){c.call(this);}return l(d);};l.fn.atIndex=function(a){var b=l.makeArray(l(this));return b[a];};l.fn.getIndexOf=function(a){var b=false;var c=l(this);var i=0;l(a).each(function(){if(l(this).equalTo(l(c))){b=i;}i++;});return b;};l.fn.equalTo=function(a){isEqual=!l(this).not(l(a)).length;return isEqual;};l.fn.fakeFloat=function(a,b){var c={direction:"left",margin:0,offset:0,speed:0},settings=l.extend(c,l.fn.fakeFloat.defaults,a);var i=0;var d=0;l(this).each(function(){d=l(this).width();if(settings.direction=="left"){l(this).animate({"left":((settings.margin)+d)*i+(settings.offset)+'px'},settings.speed);}else{l(this).animate({"right":((settings.margin)+d)*i+(settings.offset)+'px'},settings.speed);}i++;});if(typeof b=='function'){setTimeout(function(){b.call(this);},settings.speed);}return this;};l.fn.frontpush=function(a){var b=l(this).length;var c=l.makeArray(l(this));for(var i=0;i<b;i++){a.push("");}for(i=(a.length);i>b;i--){var j=i-1;a[j]=a[j-b];}for(i=0;i<b;i++){a[i]=c[i];}return l(a);};})(jQuery);